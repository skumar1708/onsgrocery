<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/6.9.1/sweetalert2.min.css">
    <link rel="stylesheet" type="text/css" href="css/index-custom.css" />
    <!-- <link rel="preload" href="img/tomsplit.gif" as="video">
    <link rel="preload" href="img/pumpspin.gif" as="video"> -->
    <title>ONS Grocery</title>
</head>

<body class="bg">
    <div id="iniDiv" class="app">
        <!-- <h1>PhoneGap</h1>-->
        <div id="deviceready" class="blink">
            <!-- <p class="event listening">Connecting to Device</p>
            <p class="event received">Device is Ready</p> -->
            <p>Please wait while we are fetching freshness for you...</p>
            <img id="loader" class="loader-init"/>
        </div>
    </div>
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript">
        init();
        function init(){
            if(navigator.onLine){
                let loaders = [
                                {url:'img/tomsplit.gif',width:'80'},
                                {url:'img/pumpspin.gif',width:'65'},
                                {url:'img/carrotspin.gif',width:'200'},
                                {url:'img/acornpealift.gif',width:'70'},
                                {url:'img/cherrycubesmall.gif',width:'70'},
                                {url:'img/fruitbowlz.gif',width:'70'},
                                {url:'img/applesmall.gif',width:'60'},
                                {url:'img/grapesmall.gif',width:'60'}
                             ];
                let randomInt = Math.floor(Math.random() * 8) + 0;
                loader.width = loaders[randomInt].width;
                loader.src = loaders[randomInt].url;
                console.log('loaders[randomInt].width is',loaders[randomInt].width);
                iniDiv.style.display = 'block';
                app.initialize();
            }else{
                iniDiv.style.display = 'none';
                let div = document.createElement('div');
                let btn = document.createElement('button');
                btn.innerHTML ="Retry";
                btn.addEventListener('click',retry);

                // var img = document.createElement('img');
                // img.src = "/img/woops.png";
                div.classList.add('no-internet');
                div.innerHTML = "<p>You are offline, please check your internet connection</p>"
                //div.append(img);
                div.append(btn)
                document.body.append(div);
            }
        }
        function retry(){
            if(navigator.onLine){
                let child = document.querySelector('.no-internet');
                document.body.removeChild(child);
                init();
                }
        }
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/6.9.1/sweetalert2.min.js'></script>
</body>

</html>
